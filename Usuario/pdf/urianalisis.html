<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Urianalisis</title>
	<link rel="stylesheet" href="urianalisis.css" />
	<script src="urianalisis.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script src="pdfs.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>

<body onload="cargarDatos()">
	
	<div class="contenedor">
		<button id="generate-pdf" onclick="generarPdf()"> EnlaceGenerar PDF</button>

		<div class="title">
			<p>Resultados Urianálisis</p>
		</div>
		<div class="datos">
        
			<div class="datos">
			  <div class="tabla1">
				<div class="linea">
				  <div class="col1">
					<p>Caso</p>
				  </div>
				  <div class="col2">
					<!-- <p>23-UA-</p> -->
					<p  id="Caso" ></p>
				  </div>
				</div>
				<div class="linea">
				  <div class="col1">
					<p>Propietario</p>
				  </div>
				  <div class="col2">
					<!-- <p>Nombre Nombre Apellido Apellido</p> -->
					<p  id="idPropietario" ></p>
				  </div>
				</div>
				<div class="linea">
				  <div class="col1">
					<p>Dirección</p>
				  </div>
				  <div class="col2">
					<!-- <p>Calle ##, Colonia Ciudad</p> -->
					<p  id="Direccion" ></p>
				  </div>
				</div>
				<div class="linea">
				  <div class="col1">
					<p>Teléfono</p>
				  </div>
				  <div class="col2">
					<!-- <p>4424424424</p> -->
					<p  id="telefono" ></p>
				  </div>
				</div>
			  </div>
			  <div class="tabla2">
				<div class="linea">
				  <div class="col3">
					<p>Fecha</p>
				  </div>
				  <div class="col4">
					<!-- <p>02/07/2023</p> -->
					<p id="fecha"></p>
				  </div>
				  <div class="col5">
					<p>Hora</p>
				  </div>
				  <div class="col6">
					<!-- <p>11:11</p> -->
					<p id="Hora"></p>
				  </div>
				</div>
				<div class="linea">
				  <div class="col3">
					<p>Especie</p>
				  </div>
				  <div class="col4">
					<p name="especie" id="Especie">
					  
					</p>
				  </div>
				  <div class="col5">
					<p>Nombre</p>
				  </div>
				  <div class="col6">
					<p id="Nombre" ></p>
				  </div>
				</div>
				<div class="linea">
				  <div class="col3">
					<p>Raza</p>
				  </div>
				  <div class="col4">
					<p type="text" id="Raza" value="Golden retreiver"></p>
				  </div>
				  <div class="col5">
					<p>Edad</p>
				  </div>
				  <div class="col6">
					<p type="number" id="Edad" value="0"></p>
				  </div>
				</div>
				<div class="linea">
				  <div class="col3">
					<p>Sexo</p>
				  </div>
				  <div class="col4">
					<p name="sexo" id="Sexo">
					</p>
				  </div>
				  <div class="col5">
					<p>Castrado</p>
				  </div>
				  <div class="col6">
					<p name="castrado" id="Castrado">
					  
					</p>
				  </div>
				</div>
				<div class="linea">
				  <div class="col3" id="col3">
					<p>Mvz</p>
				  </div>
				  <div class="col4" id="col4">
					<p type="text" id="Mvz" placeholder="Nombre Apellido"></p>
				  </div>
				  <div class="col5" id="col5">
					<p>Expediente</p>
				  </div>
				  <div class="col6" id="col6">
					<p type="text" id="Expediente" value="123456456"></p>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
		  <div class="anam">
			<div class="linea">
			  <div class="col7" id="col7">
				<p>Anamnesis / Examen físico</p>
			  </div>
			  <div class="col8" id="col8">
				<p
				  id="AnaYEx"
				></p>
			  </div>
			</div>
			<div class="linea">
			  <div class="col9" id="col9">
				<p>Tratamiento previo</p>
			  </div>
			  <div class="col10" id="col10">
				<p
				  id="TratPrev"
				  placeholder="Ingrese tratamiento previo"
				></p>
			  </div>
			</div>
		  </div>
		
		<div class="metodo">
			<div class="obt">
				<p>Método de obtención</p>
			</div>
			<div class="obtTxt">
				<p name="obtencion" id="Obtencion">
					
				</p>
			</div>
		</div>
		<div class="examenes">
			<div class="linea">
				<div class="exT1">
					<p>Examen físico</p>
				</div>
				<div class="exT2">
					<p>Examen químico</p>
				</div>
			</div>
			<div class="linea">
				<div class="exC1">
					<p>Color</p>
				</div>
				<div class="exC2">
					<p type="text" id="Color" placeholder="Ingrese"></p>
				</div>
				<div class="exC3">
					<p>Proteínas</p>
				</div>
				<div class="exC4">
					<p name="proteinas" id="Proteinas">
						
					</p>
				</div>
				<div class="exC4">
					<p>g/L</p>
				</div>
				<div class="exC5">
					<p>pH</p>
				</div>
				<div class="exC6">
					<p type="text" id="pH" placeholder="Ingrese"></p>
				</div>
			</div>
			<div class="linea">
				<div class="exC1">
					<p>Apariencia</p>
				</div>
				<div class="exC2">
					<p name="apariencia" id="Apariencia">
						
					</p>
				</div>
				<div class="exC3">
					<p>Glucosa</p>
				</div>
				<div class="exC4">
					<p name="glucosa" id="Glucosa">
						
					</p>
				</div>
				<div class="exC4">
					<p>mmol/L</p>
				</div>
				<div class="exC5">
					<p>Cetonas</p>
				</div>
				<div class="exC6">
					<p name="cetonas" id="Cetonas">
						
					</p>
				</div>
			</div>
			<div class="linea">
				<div class="exC1">
					<p>Densidad</p>
				</div>
				<div class="exC2">
					<p type="text" id="Densidad" placeholder="Ingrese"></p>
				</div>
				<div class="exC3">
					<p>Sangre/Hg</p>
				</div>
				<div class="exC4">
					<p name="hg" id="SangreHg">
						
					</p>
				</div>
				<div class="exC4">
					<p>Eri/µL</p>
				</div>
				<div class="exC5">
					<p>Bilirrubina</p>
				</div>
				<div class="exC6">
					<p name="bilirrubina" id="Bilirrubina">
						
					</p>
				</div>
			</div>
		</div>
		<div class="micro">
			<div class="linea">
				<div class="linT">
					<p>Examen microscópico</p>
				</div>
			</div>
			<div class="linea">
				<div class="miC1">
					<p>Eritrocitos</p>
				</div>
				<div class="miC2">
					<p type="text" id="Eritrocitos"></p>
				</div>
				<div class="miC3">
					<p>Campo 400x</p>
				</div>
				<div class="miC4">
					<p>Renales</p>
				</div>
				<div class="miC5">
					<p type="text" id="Renales"></p>
				</div>
				<div class="miC6">
					<p>Campo 400x</p>
				</div>
			</div>
			<div class="linea">
				<div class="miC1">
					<p>Leucocitos</p>
				</div>
				<div class="miC2">
					<p type="text" id="Leucocitos"></p>
				</div>
				<div class="miC3">
					<p>Campo 400x</p>
				</div>
				<div class="miC4">
					<p>Cristales</p>
				</div>
				<div class="miC5">
					<p type="text" id="Cristales"></p>
				</div>
				<div class="miC6">
					<p>Campo 400x</p>
				</div>
			</div>
			<div class="linea">
				<div class="miC1">
					<p>Escamosas</p>
				</div>
				<div class="miC2">
					<p type="text" id="Escamosas"></p>
				</div>
				<div class="miC3">
					<p>Campo 400x</p>
				</div>
				<div class="miC4">
					<p>Lípidos</p>
				</div>
				<div class="miC5">
					<p type="text" id="Lipidos"></p>
				</div>
				<div class="miC6">
					<p>Campo 400x</p>
				</div>
			</div>
			<div class="linea">
				<div class="miC1">
					<p>Transitorias</p>
				</div>
				<div class="miC2">
					<p type="text" id="Transitorias"></p>
				</div>
				<div class="miC3">
					<p>Campo 400x</p>
				</div>
				<div class="miC4">
					<p>Bacterias</p>
				</div>
				<div class="miC5">
					<p type="text" id="Bacterias"></p>
				</div>
				<div class="miC6">
					<p>Campo 400x</p>
				</div>
			</div>
			<div class="linea">
				<div class="miC1">
					<p>Cilindros</p>
				</div>
				<div class="miC2">
					<p type="text" id="Cilindros"></p>
				</div>
				<div class="miC3">
					<p>Campo 400x</p>
				</div>
				<div class="miC4">
					<p>Otros</p>
				</div>
				<div class="miC5">
					<p type="text" id="Otros"></p>
				</div>
				<div class="miC6">
					<p>Campo 400x</p>
				</div>
			</div>
			<div class="linea">
			</div>
		</div>
		<div class="inter">
			<div class="interT" id="interT">
				<p>Interpretación</p>
			</div>
			<div class="interTxt" id="interTxt">
				<p id="Interpretacion"></p>
			</div>
		</div>
		
	</div>
	
</body>
<script>
		var url = "http://localhost:3000";

function cargarDatos() {
var urlParams = new URLSearchParams(window.location.search);
var idExamenes = urlParams.get('idEx');
var a = "parasitologia"
console.log(idExamenes);

try {
axios.get(url + "/todos/examenes/pdf", {
headers: {
	'Authorization': 'bearer ' + localStorage.getItem("token")
},
  params: {
	  id: idExamenes,
	 tipo: "urianalisis",
	 carga: "idUrianalisis",
	 idP: localStorage.getItem("id")
  }
})
  .then(function (res) {
	  if (res.data.code == 200) {
		console.log(res.data.message)
		  modificar(res.data.message,res.data.propie)
		  console.log(res.data.propie)

	  } else {
	  }
  }).catch(function (err) {
	  console.log(err)
  })
} catch (e) {
console.log(e)
}

}
function modificar(datos, propie){

	var valores=  Object.values(datos[0])
	var analisis=[`IdUrianalisis`, `Caso`, `Fecha`, `Especie`, `Raza`, `Sexo`, `Mvz`, `Hora`, `Nombre`, `Edad`, `Castrado`, `Expediente`, `AnaYEx`, `TratPrev`, `Obtencion`, `Color`, `Apariencia`, `Densidad`, `Proteinas`, `Glucosa`, `SangreHg`, `pH`, `Cetonas`, `Bilirrubina`, `Eritrocitos`, `Leucocitos`, `Escamosas`, `Transitorias`, `Cilindros`, `Renales`, `Cristales`, `Lipidos`, `Bacterias`, `Otros`, `Interpretacion`, `Completado`, `idPropietario`, `idVeterinario`]
console.log(valores)
for (var i = 0; i < valores.length; i++) {
try {
var elemento = analisis[i];
var contenedor = document.getElementById(elemento);
var nuevoParrafo = document.createElement("h4");
nuevoParrafo.innerHTML ="\u00A0"+ valores[i];
contenedor.appendChild(nuevoParrafo);


} catch (error) {
console.log("No se encontró el elemento con ID:", analisis[i])
}
}
var contenedor = document.getElementById("Direccion");
var nuevoParrafo = document.createElement("h5");
nuevoParrafo.innerHTML = "\u00A0"+ propie[0].Direccion
contenedor.appendChild(nuevoParrafo);

var contenedor = document.getElementById("telefono");
var nuevoParrafo = document.createElement("h5");
nuevoParrafo.innerHTML = "\u00A0"+ propie[0].Telefono
contenedor.appendChild(nuevoParrafo);

var contenedor = document.getElementById("fecha");
var nuevoParrafo = document.createElement("h5");
nuevoParrafo.innerHTML = "\u00A0"+ formatearFecha(datos[0].Fecha)
contenedor.appendChild(nuevoParrafo);


}

function formatearFecha(fecha) {
    // Crea un objeto Date con la cadena de fecha proporcionada
    const fechaObjeto = new Date(fecha);

    // Obtiene los componentes de la fecha
    const dia = fechaObjeto.getDate();
    const mes = fechaObjeto.getMonth() + 1; // Los meses comienzan desde 0, por lo que se suma 1
    const año = fechaObjeto.getFullYear();

    // Formatea los componentes en una cadena con el formato deseado
    const fechaFormateada = `${dia < 10 ? '0' + dia : dia}/${mes < 10 ? '0' + mes : mes}/${año}`;

    return fechaFormateada;
}


	</script>
</html>